<div class="row">
  <div class="col-sm-2 col-xs-2">
      &nbsp;
  </div>
</div>
<div class="row">
  <div class="col-sm-2 col-xs-2">
      &nbsp;
  </div>
</div>
<div class="row">
  <div class="col-sm-2 col-xs-2">
      &nbsp;
  </div>
</div>
<div class="row">
  <div class="col-sm-2 col-xs-2">
      &nbsp;
  </div>
</div>
<div class="row">
  <div class="col-sm-2 col-xs-2">&nbsp;</div>
  <div class="col-sm-8 col-xs-8 badge badge-primary"> <h5><img src="/assets/imagens/icons/clientes.png" class="mr-2" style="width: 30px"> Cadastro de Clientes</h5></div>
</div>
<div class="row">
  <div class="col-sm-2 col-xs-2">
      &nbsp;
  </div>

  <div class="col-sm-8 col-xs-8 border border-primary rounded shadow-lg p-4 mb-4 bg-white">
      <h4>Dados do Cliente</h4>
      <form [formGroup]="clienteForm" novalidate>
          <div class="row">
              <div class="col-sm-2 col-xs-2">
                  &nbsp;
              </div>
          </div>
          <div class="row">
              <div class="col-sm-2 col-xs-2">
                  &nbsp;
              </div>
              <div class="col-sm-2 col-xs-2">
                      CPF:
              </div>
              <div class="col-sm-6  col-xs-6">
                  <cft-input errorMessage="Campo obrigatório e no formato de CPF/CNPJ" label="cpf cliente">
                      <input  name="CnpjCpf" class="form-control" formControlName="CnpjCpf" autocomplete="off" placeholder="CPF">
                  </cft-input>
              </div>{{clienteForm.get('CnpjCpf').getError('cpfNotValid')}}
              <div class="col-xs-12 col-sm-2" >
                <span *ngIf="clienteForm.get('CnpjCpf').getError('cpfNotValid')" style="color:red">
                  <i class="fa fa-remove"></i> O CPF/CNPJ não é válido.
                </span>
              </div>
          </div>

          <div class="row">
              <div class="col-sm-2 col-xs-2">
                  &nbsp;
              </div>
              <div class="col-sm-2 col-xs-2">
                      RG / IE:
              </div>
              <div class="col-sm-6  col-xs-6">
                  <cft-input errorMessage="Campo obrigatório com maximo de 18 caracteres" label="RG / IE do Cliente usuário">
                      <input name="IEstRG" class="form-control" formControlName="IEstRG" autocomplete="off" placeholder="RG /IE">
                  </cft-input>
              </div>
              <div class="col-xs-12 col-sm-2" >
                  <!-- <span class="help-block pull-right has-error-block" *ngIf="usuarioForm.get('US_USLOGIN').hasError('loginInvalido') === 'VALID'" style="color:red"><i class="fa fa-remove"></i> Login já existente</span> -->
                  <!-- <span class="help-block pull-right has-error-block" *ngIf="jogadorForm.get('JO_JOAPELIDO').hasError('apelidoInvalido')" style="color:red"><i class="fa fa-remove"></i> Apelido já existente</span> -->
              </div>
          </div>
          <div class="row">
              <div class="col-sm-2 col-xs-2">
                  &nbsp;
              </div>
              <div class="col-sm-2 col-xs-2">
                  Nome:
              </div>
              <div class="col-sm-6  col-xs-6">
                  <cft-input errorMessage="Campo obrigatório com maximo de 60 caracteres" label="Nome">
                      <input name="Nome" class="form-control" formControlName="Nome" autocomplete="off" placeholder="Nome">
                  </cft-input>
              </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              Apelido:
            </div>
            <div class="col-sm-6  col-xs-6">
                <cft-input errorMessage="Campo obrigatório com maximo de 20 caracteres" label="Nome">
                    <input name="Apelido" class="form-control" formControlName="Apelido" autocomplete="off" placeholder="Apelido">
                </cft-input>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              Orgão Emissor:
            </div>
            <div class="col-sm-6  col-xs-6">
                <cft-input errorMessage="Campo obrigatório com maximo de 6 caracteres" label="Orgão Emissor">
                    <input name="OrgEmisRg" class="form-control" formControlName="OrgEmisRg" autocomplete="off" placeholder="Orgão Emissor">
                </cft-input>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              Estado Civil:
            </div>
            <div class="col-sm-6  col-xs-6">
                <cft-input errorMessage="Campo obrigatório com maximo de 30 caracteres" label="Estado Civil">
                    <input name="EstCivil" class="form-control" formControlName="EstCivil" autocomplete="off" placeholder="Estado Civil">
                </cft-input>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              Data de Nasc.:
            </div>
            <div class="col-sm-6  col-xs-6">
                <div class="row">
                  <div class="col-sm-10  col-xs-10" >
                      <!-- <input class="form-control" placeholder="yyyy-mm-dd" name="dp" ngbDatepicker #d1="ngbDatepicker" formControlName="CP_CPDATALIMITEAPOSTA" > -->
                      <input class="form-control" placeholder="dd/mm/aaaa" name="DtNascimento" ngbDatepicker #d1="ngbDatepicker"  formControlName="DtNascimento" >
                  </div>
                  <div class="col-sm-2  col-xs-2" >
                      <button class="btn btn-primary" (click)="d1.toggle()" type="button"><i class="fa fa-table "></i></button>
                  </div>
                </div>
                <!-- <cft-input errorMessage="Data de Nasc é um campo obrigatório" label="Data de Nasc.">
                    <input name="DtNascimento" class="form-control" formControlName="DtNascimento" autocomplete="off" placeholder="Data de Nasc.">
                </cft-input> -->
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              Profissao:
            </div>
            <div class="col-sm-6  col-xs-6">
                <cft-input errorMessage="Campo obrigatório com maximo de 30 caracteres" label="Profissao">
                    <input name="ProfProfissao" class="form-control" formControlName="ProfProfissao" autocomplete="off" placeholder="Profissao">
                </cft-input>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              CEP:
            </div>
            <div class="col-sm-6  col-xs-6">
                <cft-input errorMessage="CEP é um campo obrigatório" label="CEP">
                    <input #CEP name="CEP" class="form-control" formControlName="CEP" autocomplete="off" placeholder="CEP" (input)="ConsultaCEP(CEP.value)">
                    <!-- <input  name="CEP" class="form-control" formControlName="CEP" autocomplete="off" placeholder="CEP" > -->
                </cft-input>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              UF:
            </div>
            <div class="col-sm-6  col-xs-6">
                <select name="UF" class="form-control" formControlName="UF" >
                  <option *ngFor=  "let c of (estados)" [value]="c.UF">{{c.Estado}}</option>
                </select>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12 col-xs-12">
                &nbsp;
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              Localidade:
            </div>
            <div class="col-sm-6  col-xs-6">
                <cft-input errorMessage="Campo obrigatório com maximo de 30 caracteres" label="Localidade">
                    <input name="Localidade" class="form-control" formControlName="Localidade" autocomplete="off" placeholder="Localidade/Cidade" >
                </cft-input>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              Logradouro:
            </div>
            <div class="col-sm-6  col-xs-6">
                <cft-input errorMessage="Campo obrigatório com maximo de 30 caracteres" label="Logradouro">
                    <input name="Logradouro" class="form-control" formControlName="Logradouro" autocomplete="off" placeholder="Logradouro" >
                </cft-input>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              Numero:
            </div>
            <div class="col-sm-6  col-xs-6">
                <cft-input errorMessage="Campo obrigatório com maximo de 8 caracteres" label="Numero">
                    <input name="Numero" class="form-control" formControlName="Numero" autocomplete="off" placeholder="Numero">
                </cft-input>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              Complemento:
            </div>
            <div class="col-sm-6  col-xs-6">
                <cft-input errorMessage="Campo obrigatório com maximo de 40 caracteres" label="Complemento">
                    <input name="Complemento" class="form-control" formControlName="Complemento" autocomplete="off" placeholder="Complemento">
                </cft-input>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              Bairro:
            </div>
            <div class="col-sm-6  col-xs-6">
                <cft-input errorMessage="Campo obrigatório com maximo de 40 caracteres" label="Bairro">
                    <input name="Bairro" class="form-control" formControlName="Bairro" autocomplete="off" placeholder="Bairro" >
                </cft-input>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              EMail:
            </div>
            <div class="col-sm-6  col-xs-6">
                <cft-input errorMessage="EMail é um campo obrigatório" label="EMail">
                    <input name="EMail" class="form-control" formControlName="EMail" autocomplete="off" placeholder="EMail">
                </cft-input>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-2 col-xs-2">
              Contato:
            </div>
            <div class="col-sm-6  col-xs-6">
                <cft-input errorMessage="Campo obrigatório com maximo de 40 caracteres" label="Contato">
                    <input name="Contato" class="form-control" formControlName="Contato" autocomplete="off" placeholder="Contato">
                </cft-input>
            </div>
          </div>
          <!-- <div class="row">
              <div class="col-sm-2 col-xs-2">
                  &nbsp;
              </div>
              <div class="col-sm-3 col-xs-3">
                  Clube:
              </div>
              <div class="col-sm-5  col-xs-5" >
                  <select name="JO_CLID" class="form-control" formControlName="JO_CLID">
                      <option *ngFor=  "let c of (clubes)" [value]="c.CL_CLID">{{c.CL_CLNOME}}</option>
                  </select>
              </div>
          </div> -->
          <!--***********************************GRID-->
        <dx-data-grid
            id="gridContainer"
            [dataSource]="dataSource"
            keyExpr="IdTelefone"
            [allowColumnReordering]="true"
            [showBorders]="true"
            (onEditingStart)="logEvent('EditingStart')"
            (onEditorPreparing)="onEditorPreparing($event)"
            (onInitNewRow)="logEvent('InitNewRow')"
            (onRowInserting)="logEvent('RowInserting')"
            (onRowInserted)="logEvent('RowInserted')"
            (onRowUpdating)="logEvent('RowUpdating')"
            (onRowUpdated)="logEvent('RowUpdated')"
            (onRowRemoving)="logEvent('RowRemoving')"
            (onRowRemoved)="logEvent('RowRemoved')"
            (onSaving)="inserirTelefone(dataSource)"
            (onSaved)="logEvent('Saved')"
            (onEditCanceling)="logEvent('EditCanceling')"
            (onEditCanceled)="logEvent('EditCanceled')">

            <dxo-paging [enabled]="true"></dxo-paging>
            <dxo-editing
                mode="row"
                [allowUpdating]="true"
                [allowDeleting]="true"
                [allowAdding]="true">
            </dxo-editing>

            <dxi-column dataField="DDD" caption="DDD" dataType="number" >
              <dxi-validation-rule
                type="required"
                [pattern]="patternDDD" message="Formato DDD (11)!"
                [validationCallback]="asyncValidation"
              ></dxi-validation-rule>
            </dxi-column>
            <dxi-column dataField="Numero" dataType="number" >
              <dxi-validation-rule
              type="required"
              [pattern]="FonePattern" message="Formato Numero (111111111)!"
              [validationCallback]="asyncValidation"
              ></dxi-validation-rule>
            </dxi-column>
            <dxi-column dataField="Ramal" >
              <dxi-validation-rule
              [pattern]="RamalPattern" message="Formato ramal (1111)!"
              [validationCallback]="asyncValidation"
              ></dxi-validation-rule>
            </dxi-column>

            <dxi-column
                dataField="IndTipoFone"
                caption="TipoTelefone"
                [width]="125">
                <dxo-lookup
                    [dataSource]="tiposTelefone"
                    displayExpr="DescTipoTelefone"
                    valueExpr="IndTipoFone">
                </dxo-lookup>
            </dxi-column>
            <!-- <dxi-column
                dataField="BirthDate"
                [width]="125"
                dataType="date">
            </dxi-column> -->
        </dx-data-grid>
        <!--***********************************GRID***********************************-->
      </form>
      <div class="dx-fieldset">
        <dx-validation-summary id="summary"></dx-validation-summary>
        <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-8 col-xs-8">
                <button (click)="SalvarCliente(clienteForm.value)"type="button" class="btn btn-primary pull-right btn-block" [disabled]="!clienteForm.valid" >
                    <i class="fa fa-save"></i> Salvar
                </button>
            </div>
            <div class="col-sm-8 col-xs-8">
              <button (click)="findInvalidControls()"type="button" class="btn btn-primary pull-right btn-block" >
                  <i class="fa fa-save"></i> teste
              </button>
          </div>
            <div class="col-sm-3 col-xs-3" >
                &nbsp;
            </div>
        </div>
      </div>
  </div>
</div>

