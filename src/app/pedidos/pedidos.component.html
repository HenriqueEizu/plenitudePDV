<div class="row">
  <div class="col-sm-2 col-xs-2">
      &nbsp;
  </div>
</div>
<div class="row">
  <div class="col-sm-2 col-xs-2">
      &nbsp;
  </div>
</div>
<div class="row"  >
  <div class="col-sm-2 col-xs-2">
      &nbsp;
  </div>
</div>
<div class="row">
  <div class="col-sm-2 col-xs-2">
      &nbsp;
  </div>
</div>
<div class="row">
  <div class="col-sm-1 col-xs-1">&nbsp;</div>
  <div class="col-sm-10 col-xs-10 badge badge-primary"> <h5><img src="/assets/imagens/icons/pedido.png" class="mr-2" style="width: 30px"> Cadastro de Pedidos</h5></div>
</div>
<div class="row">
  <div class="col-sm-1 col-xs-1">
      &nbsp;
  </div>

  <div class="col-sm-10 col-xs-10 border border-primary rounded shadow-lg p-4 mb-4 bg-white">
      <h4>Dados do Pedido</h4>
      <form [formGroup]="pedidoForm" novalidate>
          <div class="row">
              <div class="col-sm-2 col-xs-2">
                  &nbsp;
              </div>
          </div>
          <div class="row">
              <div class="col-sm-2 col-xs-2">
                      Nº Pedido:
              </div>
              <div class="col-sm-3  col-xs-3">
                <input name="id_Ped" class="form-control  form-control-sm" formControlName="id_Ped" autocomplete="off" [attr.disabled]="true"  placeholder="Nº Pedido">
              </div>
            <div class="col-sm-2 col-xs-2">
                    {{labelCpfCliente}}
            </div>
            <div class="col-sm-3  col-xs-3">
              <cft-input errorMessage="*" label="Cliente">
                <input name="nome_Cli" class="form-control  form-control-sm" formControlName="nome_Cli" autocomplete="off" placeholder="Digite CPF/CNPF" [attr.disabled]="strDesabilitaCliente">
              </cft-input>
            </div>
            <div class="col-xs-2 col-sm-2" >
              <!-- <span *ngIf="blnClienteInvalido" style="color:red"> -->
              <span *ngIf="pedidoForm.get('nome_Cli').getError('clienteNotValid')" style="color:red">
                <i class="fa fa-remove"></i> Cliente inexistente na base de dados.
              </span>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
              &nbsp;
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                    Versão:
            </div>
            <div class="col-sm-3  col-xs-3">
                <input name="versao" class="form-control  form-control-sm" formControlName="versao" autocomplete="off" placeholder="Versão" [attr.disabled]="true">
            </div>
            <div class="col-sm-2 col-xs-2">
                    {{labelCliente}}
            </div>
            <div class="col-sm-4  col-xs-4">
              {{cliente}}
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
              &nbsp;
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                    Data:
            </div>
            <div class="col-sm-3  col-xs-3">
                <input name="dtPed" class="form-control  form-control-sm" formControlName="dtPed" autocomplete="off" placeholder="Data Pedido" [attr.disabled]="true">
            </div>
            <div class="col-sm-2 col-xs-2">
                    Observação:
            </div>
            <div class="col-sm-3  col-xs-3">
                <textarea class="form-control  form-control-sm" name="observ" rows="4" cols="50" formControlName="observ" [attr.disabled]="blnDesabilitaCampos" style="text-transform:uppercase" ></textarea>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                    Situação:
            </div>
            <div class="col-sm-3  col-xs-3">
                <input name="descrSituacao" class="form-control  form-control-sm" formControlName="descrSituacao" autocomplete="off" placeholder="Situação" [attr.disabled]="true">
            </div>
            <div class="col-sm-2 col-xs-2">
                    Ent.Min.:
            </div>
            <div class="col-sm-3  col-xs-3">
              <input name="entMin" class="form-control  form-control-sm"  autocomplete="off" placeholder="ent.Min" [attr.disabled]="true" value="{{data}}">
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
              Periodo:
            </div>
            <div class="col-sm-3  col-xs-3">
                <select name="idPeriodo" class="form-control  form-control-sm" formControlName="per_Ent" [value]="4" [attr.disabled]="blnDesabilitaCampos">
                  <option *ngFor=  "let c of (periodo)" [value]="c.idPeriodo">{{c.descricao}}</option>
                </select>
            </div>
            <div class="col-sm-2 col-xs-2">
                Entrega:
            </div>
            <div class="col-sm-3  col-xs-3">
              <div class="row">
                <div class="col-sm-10  col-xs-10" >
                  <cft-input errorMessage="" label="Observação">
                    <input  class="form-control  form-control-sm" placeholder="dd/mm/yyyy" name="entrega" ngbDatepicker #d1="ngbDatepicker" formControlName="entrega" [minDate]="dataMin" [readonly]="true">
                    <!-- <input  name="Entrega" class="form-control  form-control-sm" formControlName="Entrega" autocomplete="off" placeholder="dd/mm/aaaa"> -->
                  </cft-input>
                </div>
                <div class="col-sm-2  col-xs-2" >
                    <button class="btn btn-primary btn-sm" (click)="d1.toggle()" type="button" [attr.disabled]="blnDesabilitaCampos"><i class="fa fa-table " ></i></button>
                </div>
                <div class="col-xs-12 col-sm-12" >
                  <span *ngIf="pedidoForm.get('entrega').getError('dataEntrega')" style="color:red">
                    <i class="fa fa-remove"></i> Data não pode ser menor que a data de hoje.
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                Midia:
            </div>
            <div class="col-sm-3  col-xs-3">
              <select name="idMidia" class="form-control  form-control-sm" formControlName="idMidia" #idMidia [attr.disabled]="blnDesabilitaCampos">
                <option *ngFor=  "let c of (midias)" [value]="c.idMidia">{{c.descMidia}}</option>
              </select>
            </div>
            <div class="col-sm-2 col-xs-2">
                Outras:
            </div>
            <div class="col-sm-3  col-xs-3">
              <cft-input errorMessage="Campo obrigatório com maximo de 60 caracteres" label="Midia" >
                  <input name="obsMidia" class="form-control  form-control-sm" formControlName="obsMidia" autocomplete="off" placeholder="Midia" [attr.disabled]="blnDesabilitaCampos" style="text-transform:uppercase" >
              </cft-input>
            </div>
            <div class="col-xs-2 col-sm-2" >
              <span *ngIf="pedidoForm.hasError('midia')" style="color:red">
                <i class="fa fa-remove"></i> Com a opção Outras na midia este campo deve ser preechido".
              </span>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                Vendedores:
            </div>
            <div class="col-sm-3  col-xs-3">
              <select name="idVendedor" class="form-control  form-control-sm" formControlName="idVendedor" [attr.disabled]="blnDesabilitaCampos">
                <option *ngFor=  "let c of (vendedores)" [value]="c.idVendedor">{{c.nome}}</option>
              </select>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-8 col-xs-8">
                <button (click)="SalvarPedido(pedidoForm.value)"type="button" class="btn btn-primary pull-right btn-block btn-sm" [disabled]="!pedidoForm.valid || blnPedidoIntegrado" >
                    <i class="fa fa-save"></i> Salvar
                </button>
            </div>
            <!-- <div class="col-sm-8 col-xs-8">
              <button (click)="findInvalidControls()"type="button" class="btn btn-primary pull-right btn-block" >
                  <i class="fa fa-save"></i> teste
              </button>
            </div> -->
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
          </div>
          <!-- <tabset> -->
            <div class="tab">
              <button class="tablinks active btn-sm" id="AbaProdutos" (click)="AbaAtiva($event,'Produtos')">Produtos</button>
              <button class="tablinks btn-sm" (click)="AbaAtiva($event,'Financeiro')">Financeiro</button>
              <button class="tablinks btn-sm" (click)="AbaAtiva($event,'Entrega')">Entrega/Encerramento</button>
            </div>
            <!-- ****************************PRODUTOS*********************************** -->
            <!-- <tab heading="Produtos" id="tab1" class="bordatab"> -->
            <div id="Produtos" class="tabcontent" >
              <div class="row" style="border: 1px;">
                <div class="col-sm-12 col-xs-12 table-responsive-xl" >
                  <table class="table table-sm table-striped col-sm-12 col-xs-12" >
                    <thead>
                    <tr>
                      <th>Produto</th>
                      <th>Quant.</th>
                      <th>Vl.Unit.</th>
                      <th>Vl.Total</th>
                      <th>Saída</th>
                      <th>Frete</th>
                      <th scope="col">Ação</th>
                      <th scope="col">Ação</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let ip of itensPedido " >
                      <td>
                        <span [tooltip]="ip.produto" placement="top" show-delay="500">
                          {{ip.produto != null ? ip.produto.substring(0,60) : null}}
                        </span>
                      </td>
                      <td>
                        <span [tooltip]="ip.quantid" placement="top" show-delay="500">
                          {{ip.quantid}}
                        </span>
                      </td>
                      <td>
                        <span [tooltip]="ip.valuni | currency : 'R$'" placement="top" show-delay="500">
                          {{ip.valuni | currency : 'R$'}}
                        </span>
                      </td>
                      <td>
                        <span [tooltip]="ip.valtot | currency : 'R$'" placement="top" show-delay="500">
                          {{ip.valtot | currency : 'R$'}}
                        </span>
                      </td>
                      <td>
                        <span [tooltip]="ip.saida" placement="top" show-delay="500">
                          {{ip.saida}}
                        </span>
                      </td>
                      <td>
                        <span [tooltip]="ip.tipoFrete" placement="top" show-delay="500">
                          {{ip.tipoFrete}}
                        </span>
                      </td>
                      <td >
                        <div [hidden]="blnPedidoIntegrado">
                          <a class="linkPoint"  (click)="showChildModal(ip)">
                            <span tooltip="Editar" placement="top" show-delay="500">
                              <i class="fa fa-edit"></i>
                            </span>
                          </a>
                        </div>
                      </td>
                      <td>
                        <div [hidden]="blnPedidoIntegrado">
                          <a class="linkPoint" (click)="ExcluirItemPedido(ip);"  >
                            <span tooltip="Excluir" placement="top" show-delay="500">
                              <i class="fa fa-minus-circle" style="color:red;"></i>
                            </span>
                          </a>
                        </div>
                      </td>

                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-2 col-xs-2">
                  &nbsp;
                </div>
                <div class="col-sm-2 col-xs-2">
                  <b>TOTAL:</b>
                </div>
                <div class="col-sm-8 col-xs-8">
                  <p class="bg-light text-dark">{{totalPedido | currency : 'R$'}}</p>

                </div>
              </div>
              <div class="row">
                <div class="col-sm-2 col-xs-2">
                    &nbsp;
                </div>
              </div>
              <div class="row">
                <div class="col-sm-3 col-xs-3">
                  <button class="btn btn-primary pull-right btn-block btn-sm" data-toggle="modal" data-target="#Fabrica" type="button" [disabled]="blnDesabilitaBotoes || blnPedidoIntegrado || pedido.id_Ped == null">
                    <img src="assets/imagens/icons/factory2.png" class="mr-2" style="width: 20px; color: white; ">
                    Fábrica
                </button>
                </div>
                <div class="col-sm-1 col-xs-1"></div>
                <div class="col-sm-3 col-xs-3">
                  <!-- <button class="btn btn-primary pull-right btn-block" data-toggle="modal" data-target="#Estoque" type="button" data-backdrop="static" data-keyboard="false" data-dismiss = "modal" data-whatever="@mdo" [disabled]="blnDesabilitaBotoes || blnPedidoIntegrado || pedido.id_Ped == null"> -->
                    <button class="btn btn-primary pull-right btn-block btn-sm" data-toggle="modal" data-target="#Estoque" type="button" data-backdrop="static" data-keyboard="false" data-dismiss = "modal" data-whatever="@mdo" [disabled]="blnDesabilitaBotoes || blnPedidoIntegrado || pedido.id_Ped == null">
                    <img src="assets/imagens/icons/estoque.png" class="mr-2" style="width: 20px; color: white; ">
                    Estoque
                  </button>
                </div>
                <div class="col-sm-1 col-xs-1"></div>
                <div class="col-sm-3 col-xs-3">
                  <button class="btn btn-primary pull-right btn-block btn-sm" data-toggle="modal" data-target="#Fabrica" type="button" [disabled]="blnDesabilitaBotoes" (click)="AtualiazarItemPedido(true)">
                    <img src="assets/imagens/icons/atualizar.png" class="mr-2" style="width: 15px; color: white; ">
                    Atualizar
                  </button>
                </div>
              </div>
            </div>
            <!-- </tab> -->
            <!-- ****************FINACNCEIRO *********************** -->
            <div id="Financeiro" class="tabcontent">
            <!-- <tab heading="Financeiro"> -->
              <div class="row" style="border: 1px;" >
                <div class="col-sm-12 col-xs-12 table-responsive-xl">
                  <div class="row">
                    <div class="col-sm-2 col-xs-2">
                        &nbsp;
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-1 col-xs-1">
                      Tot.Itens
                    </div>
                    <div class="col-sm-2 col-xs-2">
                      <input class="form-control  form-control-sm" autocomplete="off" [attr.disabled]="true" value="{{totalPedido  | currency : 'R$'}}">
                    </div>
                    <div class="col-sm-1 col-xs-1">
                      Desconto(%)
                    </div>
                    <div class="col-sm-2 col-xs-2">
                      <input #Desc_Por class="form-control  form-control-sm" [attr.disabled]="(!blnItensPedido || !blnItensPagto || blnPedidoIntegrado ) == true ? true : null"formControlName="Desc_Por" autocomplete="off" placeholder="Desconto%"   type="text" [allowNegativeNumbers]="false" mask="separator.2" (keyup)="AtualizaValorPedido(Desc_Por.value,'Porcentagem')">
                    </div>
                    <div class="col-sm-2 col-xs-2">
                      <input #Desconto class="form-control  form-control-sm" [attr.disabled]="(!blnItensPedido || !blnItensPagto || blnPedidoIntegrado) == true ? true : null"  formControlName="Desconto" autocomplete="off" placeholder="Desconto"   prefix="R$ " type="text" [allowNegativeNumbers]="false" mask="separator.2" thousandSeparator="."   (keyup)="AtualizaValorPedido(Desconto.value,'Desconto')">
                    </div>
                    <div class="col-sm-1 col-xs-1">
                      &nbsp;
                    </div>
                    <div class="col-sm-1 col-xs-1">
                      Total (- desconto)
                    </div>
                    <div class="col-sm-2 col-xs-2">
                      <input class="form-control  form-control-sm" autocomplete="off" [attr.disabled]="true" value="{{(totalPedido - numValorDesconto ) | currency : 'R$'}}">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-2 col-xs-2">
                        &nbsp;
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-1 col-xs-1">
                      Frete
                    </div>
                    <div class="col-sm-2 col-xs-2">
                        <input #VlFrete class="form-control  form-control-sm" formControlName="VlFrete" autocomplete="off" placeholder="Frete" prefix="R$ " type="text" [allowNegativeNumbers]="false" mask="separator.2" thousandSeparator="." autocomplete="off" placeholder="Frete" [attr.disabled]="(!blnItensPedido || blnPedidoIntegrado) == true ? true : null" (keyup)="AtualizaValorPedido(VlFrete.value,'VlFrete')">
                        <!-- <input class="form-control" #VlFrete name="VlFrete" prefix="R$ " formControlName="VlFrete" type="text" [allowNegativeNumbers]="false" mask="separator.2" thousandSeparator="." autocomplete="off" placeholder="Frete" [attr.disabled]="blnDesabilitaCampos"> -->
                        <!-- <input class="form-control" autocomplete="off" placeholder="Frete" [attr.disabled]="blnDesabilitaCampos"> -->
                    </div>
                    <div class="col-sm-1 col-xs-1">
                      &nbsp;
                    </div>
                    <div class="col-sm-2 col-xs-2">
                      Total a pagar(+frete - desc)
                    </div>
                    <div class="col-sm-2 col-xs-2">
                      <input class="form-control  form-control-sm" autocomplete="off" [attr.disabled]="true" value="{{(totalPedido + numValorFrete - numValorDesconto ) | currency : 'R$'}}">
                    </div>
                    <div class="col-sm-1 col-xs-1">
                      &nbsp;
                    </div>
                    <div class="col-sm-1 col-xs-1">
                      Saldo (não inclui frete)
                    </div>
                    <div class="col-sm-2 col-xs-2">
                      <input name="obsMidia" class="form-control  form-control-sm" formControlName="obsMidia" autocomplete="off" placeholder="Midia" [attr.disabled]="true" value="{{(totalPedido - numValorDesconto) - totalPago | currency : 'R$'}}">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-2 col-xs-2">
                        &nbsp;
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-2 col-xs-2">
                      Observaçoes Finacneiras;
                    </div>
                    <div class="col-sm-10 col-xs-10">
                      <textarea name="Text1" cols="100" rows="5"></textarea>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-2 col-xs-2">
                        &nbsp;
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-5 col-xs-5 container well">
                      <table id="myTable" class="table table-sm table-striped col-sm-12 col-xs-12 table-hover">
                        <thead>
                        <tr>
                          <th>Fr.Pgto</th>
                          <th><span tooltip="Parcelas">Par</span></th>
                          <th>Vl.Amort</th>
                          <th>Tot.Parcs</th>
                          <th></th>
                          <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let fp of lstFormaPagto " (click)="SelecionarFormaPagamento(fp)" [class.active]="true">
                          <td>
                            <span [tooltip]="fp.formaPag" placement="top" show-delay="500">
                              {{fp.formaPag != null ? fp.formaPag.substring(0,6) : null}}
                            </span>
                          </td>
                          <td>
                              {{fp.tot_Parc }}
                          </td>
                          <td>
                              {{fp.val_ARec | currency : 'R$'}}
                          </td>
                          <td>
                              {{fp.val_Fin | currency : 'R$'}}
                          </td>
                          <td>
                            <div [hidden]="blnPedidoIntegrado">
                              <a  class="linkPoint" (click)="AlterarFormaPagamentoModal(fp)">
                                <span tooltip="Editar" placement="top" show-delay="500">
                                  <i class="fa fa-edit"></i>
                                </span>
                              </a>
                            </div>
                          </td>
                          <td>
                            <div [hidden]="blnPedidoIntegrado">
                              <a class="linkPoint" (click)="ExcluirFormaPagamento(fp);"  >
                                <span tooltip="Excluir" placement="top" show-delay="500">
                                  <i class="fa fa-minus-circle" style="color:red;"></i>
                                </span>
                              </a>
                            </div>
                          </td>
                        </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="col-sm-7 col-xs-7">
                      <table class="table table-sm table-striped col-sm-12 col-xs-12">
                        <thead>
                        <tr>
                          <th>Nº</th>
                          <th>Doc</th>
                          <th>Data</th>
                          <th>Banco</th>
                          <th>Praça</th>
                          <th>Agência</th>
                          <th>Cheque</th>
                          <th>Valor</th>
                          <th>Ação</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let ip of lstItensPagto ">
                          <td></td>
                          <td>{{ip.document}}</td>
                          <td>{{ip.dt_Venc | date: 'dd/MM/yyyy'}}</td>
                          <td>{{ip.banco}}</td>
                          <td>{{ip.praca}}</td>
                          <td>{{ip.agencia}}</td>
                          <td>{{ip.num_Cheq}}</td>
                          <td>{{ip.valor | currency : 'R$'}}</td>
                          <td>
                            <div [hidden]="blnPedidoIntegrado">
                              <a  class="linkPoint" (click)="AlteraItemPagamentoJanela(ip)">
                                <span tooltip="Editar" placement="top" show-delay="500">
                                  <i class="fa fa-edit"></i>
                                </span>
                              </a>
                            </div>
                          </td>
                        </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-2 col-xs-2">
                    &nbsp;
                </div>
              </div>
              <div class="row">
                <div class="col-sm-3 col-xs-3">
                  <button class="btn btn-primary pull-right btn-block btn-sm" data-toggle="modal"  type="button" [disabled]="((totalPedido + numValorFrete - numValorDesconto) <= totalPago) || blnPedidoIntegrado" (click)="IncluirFormaPagamentoModal()">
                    <img src="assets/imagens/icons/factory2.png" class="mr-2" style="width: 20px; color: white; ">
                    Incluir
                  </button>
                </div>
                <div class="col-sm-1 col-xs-1"></div>
                <div class="col-sm-3 col-xs-3">
                  <button class="btn btn-primary pull-right btn-block btn-sm" data-toggle="modal" data-target="#Estoque" type="button" data-backdrop="static" data-keyboard="false" data-dismiss = "modal" data-whatever="@mdo" [disabled]="blnDesabilitaBotoes">
                    <img src="assets/imagens/icons/estoque.png" class="mr-2" style="width: 20px; color: white; ">
                    Imprimir
                  </button>
                </div>
                <div class="col-sm-1 col-xs-1"></div>
                <div class="col-sm-3 col-xs-3">
                  <button class="btn btn-primary pull-right btn-block btn-sm" data-toggle="modal" data-target="#Fabrica" type="button" [disabled]="blnDesabilitaBotoes" (click)="AtualizaFormaPagamento(true)">
                    <img src="assets/imagens/icons/atualizar.png" class="mr-2" style="width: 15px; color: white; ">
                    Atualizar
                  </button>
                </div>
              </div>
            </div>
            <!-- </tab> -->
              <!-- ****************ENTREGA / ENCERRAMENTO *********************** -->
            <!-- <tab heading="Entrega/Encerramento"> -->
            <div id="Entrega" class="tabcontent" >
              <div class="row" style="border: 1px;">
                <div class="col-sm-12 col-xs-12 table-responsive-xl">
                  <div class="row">
                    <div class="col-sm-2 col-xs-2">
                        &nbsp;
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-sm-12 col-xs-12">
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-12 col-xs-12 ">
                          <p class="bg-info text-white">Datas</p>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                        <div class="col-sm-2 col-xs-2">
                          Data Mínima:
                        </div>
                        <div class="col-sm-5 col-xs-5">
                              <input  class="form-control  form-control-sm" formControlName="entregaMinima" name="entregaMinima" placeholder="dd/mm/aaaa" [attr.disabled]="blnPedidoIntegrado == true ? true : null"  >
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                        <div class="col-sm-2 col-xs-2">
                          Data entrega
                        </div>
                        <div class="col-sm-5 col-xs-5">
                          <div class="row">
                            <div class="col-sm-8 col-xs-8">
                              <input  class="form-control  form-control-sm" placeholder="dd/mm/aaaa" formControlName="entrega" name="entrega" ngbDatepicker #d2="ngbDatepicker"  [disabled]="blnPedidoIntegrado">
                            </div>
                            <div class="col-sm-3 col-xs-3">
                              <button [attr.disabled]="blnPedidoIntegrado == true ? true : null" class="btn btn-primary  btn-sm" (click)="d2.toggle()" type="button"><i class="fa fa-table "></i></button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                        <div class="col-sm-2 col-xs-2">
                          Período:
                        </div>
                        <div class="col-sm-5 col-xs-5">
                          <select name="idPeriodo" class="form-control  form-control-sm" formControlName="per_Ent" [value]="4" [attr.disabled]="blnPedidoIntegrado == true ? true : null">
                            <option *ngFor=  "let c of (periodo)" [value]="c.idPeriodo">{{c.descricao}}</option>
                          </select>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-12 col-xs-12 ">
                          <p class="bg-info text-white">Dados para a Entrega</p>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-1 col-xs-1"></div>
                        <div class="col-sm-1 col-xs-1">ddd: </div>
                        <div class="col-sm-2 col-xs-2">
                          <input [attr.disabled]="blnPedidoIntegrado == true ? true : null" name="ddd" class="form-control  form-control-sm" autocomplete="off" placeholder="DDD" >
                        </div>
                        <div class="col-sm-1 col-xs-1">Fone: </div>
                        <div class="col-sm-2 col-xs-2">
                          <input [attr.disabled]="blnPedidoIntegrado == true ? true : null" name="Fone" class="form-control  form-control-sm" autocomplete="off" placeholder="Fone" >
                        </div>
                        <div class="col-sm-1 col-xs-1">Ramal: </div>
                        <div class="col-sm-2 col-xs-2">
                          <input [attr.disabled]="blnPedidoIntegrado == true ? true : null" name="Ramal" class="form-control  form-control-sm" autocomplete="off" placeholder="Ramal" >
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">&nbsp;</div>
                        <div class="col-sm-7 col-xs-7">
                          <div class="form-check">
                            <input checked class="form-check-input" type="checkbox" #chkEndCliente name="chkEndCliente" (change)="MesmoEnderecoCliente($event.target.checked)" [attr.disabled]="blnPedidoIntegrado == true ? true : null"/>
                            <label class="form-check-label" for="flexCheckDefault">
                              Entrega no Endereço do Cliente
                            </label>
                          </div>
                          <!-- <input type="checkbox" style="zoom: .5; -webkit-transform: scale(0.5,0.5);" name="chkEndCliente" class="form-control" autocomplete="off" placeholder="DDD" > -->
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-1 col-xs-1">&nbsp;</div>
                        <div class="col-sm-1 col-xs-1">CEP <span style="color:red" tooltip="Campo Obrigatório" placement="top" show-delay="500">&nbsp;&nbsp;*</span></div>
                        <div class="col-sm-4 col-xs-4">
                          <input type="text" pattern="[0-9]+" title="please enter number only" #CEP maxlength="8" formControlName="CEP" name="CEP" class="form-control"  autocomplete="off" placeholder="cep" (input)="ConsultaCEP(CEP.value)" [attr.disabled]="blnCampoEndereco == true ? true : null">
                        </div>
                        <div class="col-sm-1 col-xs-1"></div>
                        <div class="col-sm-1 col-xs-1">UF <span style="color:red" tooltip="Campo Obrigatório" placement="top" show-delay="500">&nbsp;&nbsp;*</span></div>
                        <div class="col-sm-3  col-xs-3">
                          <select formControlName="Uf" #Uf name="uf" class="form-control  form-control-sm"  [attr.disabled]="blnCampoEndereco == true ? true : null" (change)="ValidaEndereco()">
                            <option *ngFor=  "let c of (estados)" [value]="c.uf">{{c.estado}}</option>
                          </select>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-1 col-xs-1">&nbsp;</div>
                        <div class="col-sm-1 col-xs-1">Cidade<span style="color:red" tooltip="Campo Obrigatório" placement="top" show-delay="500">&nbsp;&nbsp;*</span></div>
                        <div class="col-sm-9 col-xs-9">
                          <input  formControlName="Cidade" #Cidade name="cidade" class="form-control  form-control-sm"  autocomplete="off" placeholder="Cidade" [attr.disabled]="blnCampoEndereco == true ? true : null" (input)="ValidaEndereco()" style="text-transform:uppercase" >
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-1 col-xs-1">&nbsp;</div>
                        <div class="col-sm-1 col-xs-1">Logradouro <span style="color:red" tooltip="Campo Obrigatório" placement="top" show-delay="500">&nbsp;&nbsp;*</span></div>
                        <div class="col-sm-9 col-xs-9">
                          <input  formControlName="Logradouro" #Logradouro name="Logradouro" class="form-control  form-control-sm" autocomplete="off" placeholder="Logradouro" [attr.disabled]="blnCampoEndereco == true ? true : null" (input)="ValidaEndereco()" style="text-transform:uppercase" >
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-1 col-xs-1">&nbsp;</div>
                        <div class="col-sm-1 col-xs-1">Número <span style="color:red" tooltip="Campo Obrigatório" placement="top" show-delay="500">&nbsp;&nbsp;*</span></div>
                        <div class="col-sm-3 col-xs-3">
                          <input  type="number" formControlName="NumeroCasa" #NumeroCasa name="NumeroCasa" class="form-control  form-control-sm" autocomplete="off" placeholder="Número" [attr.disabled]="blnCampoEndereco == true ? true : null" (input)="ValidaEndereco()" style="text-transform:uppercase" >
                        </div>
                        <div class="col-sm-1 col-xs-1"></div>
                        <div class="col-sm-1 col-xs-1">Complemento</div>
                        <div class="col-sm-4 col-xs-4">
                          <input  formControlName="Complemento" name="Complemento" class= "form-control  form-control-sm" autocomplete="off" placeholder="Complemento" [attr.disabled]="blnCampoEndereco == true ? true : null" style="text-transform:uppercase" >
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-1 col-xs-1">&nbsp;</div>
                        <div class="col-sm-1 col-xs-1">Bairro <span style="color:red" tooltip="Campo Obrigatório" placement="top" show-delay="500">&nbsp;&nbsp;*</span></div>
                        <div class="col-sm-9 col-xs-9">
                          <input formControlName="Bairro" #Bairro name="Bairro" class="form-control  form-control-sm" autocomplete="off" placeholder="Bairro" [attr.disabled]="blnCampoEndereco == true ? true : null" (keyup)="ValidaEndereco()" style="text-transform:uppercase" >
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-2 col-xs-2">
                            &nbsp;
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-1 col-xs-1">&nbsp;</div>
                        <div class="col-sm-1 col-xs-1">Pto Referencia</div>
                        <div class="col-sm-9 col-xs-9">
                          <input formControlName="PtoReferencia" name="PtoRefer" class="form-control  form-control-sm" autocomplete="off" placeholder="Referencia" style="text-transform:uppercase" >
                        </div>
                      </div>
                    </div>
                    <!-- <div class="col-sm-4 col-xs-4">

                    </div> -->

                  </div>
                </div>
              </div>
            </div>
            <!-- </tab> -->
          <!-- </tabset> -->

          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-xs-2">
                &nbsp;
            </div>
            <div class="col-sm-8 col-xs-8">
                <button (click)="EncerraPedido(pedidoForm.value)"type="button" class="btn btn-danger pull-right btn-block btn-sm" [disabled]="!(blnItensPedido && blnItensPagto && ((totalPedido + numValorFrete - numValorDesconto) - totalPago) == 0 && blnMesmoEndereco && pedidoForm.valid && !blnPedidoIntegrado)" >
                    <i class="fa fa-save"></i> Confirmar pedido
                </button>
                {{blnItensPedido}} -- blnItensPedido
                {{blnItensPagto}} -- blnItensPagto
                {{(totalPedido + numValorFrete - numValorDesconto) - totalPago}} -- TOTAL
                {{blnMesmoEndereco}} -- blnMesmoEndereco
                {{pedidoForm.valid}} -- pedidoForm.valid
                {{blnPedidoIntegrado}} -- blnPedidoIntegrado
            </div>
            <!-- <div class="col-sm-8 col-xs-8">
              <button (click)="findInvalidControls()"type="button" class="btn btn-primary pull-right btn-block" >
                  <i class="fa fa-save"></i> teste
              </button>
            </div> -->
          </div>
      </form>
      <div class="dx-fieldset">
        <!-- <dx-validation-summary id="summary"></dx-validation-summary> -->

      </div>
  </div>
</div>
<!-- Modal BOTÃO ESTOQUE -->
<div class="modal" id="Estoque">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Itens de Estoque</h4>
        <button type="button" class="close btn-sm" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal Inserir itensPedido -->
      <div class="modal-body ">
        <div class="row">
          <div class="col-sm-12 col-xs-12 ">
            Inserir Itens de Estoque do pedido {{nNumeroIped}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
          <div class="col-sm-1 col-xs-1 ">
            Pal.Chave:
          </div>
          <div class="col-sm-4 col-xs-4 ">
            <input #palavraChave name="palavraChave" class="form-control  form-control-sm"  autocomplete="off" placeholder="Palavra Chave" (input)="AtribuiValor(palavraChave.value)">
          </div>
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
          <div class="col-sm-3 col-xs-3 ">
            <button class="btn btn-primary pull-right btn-block btn-sm" type="button" [disabled]="!blnCriterio"
            (click)="ConsultarItensEstoque(Id_Alm,palavraChave)">
              <img src="assets/imagens/icons/pesquisa2.png" class="mr-2" style="width: 20px; color: white; ">
              Pesquisar
            </button>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
          <div class="col-sm-1 col-xs-1 ">
            Estoque:
          </div>
          <div class="col-sm-4 col-xs-4 ">
            <select #Id_Alm name="Id_Alm" class="form-control  form-control-sm"  >
              <option *ngFor=  "let c of (estoques)" [value]="c.id_Alm">{{c.descr}}</option>
            </select>
          </div>
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
          <div class="col-sm-3 col-xs-3 ">
            <input name="qtdItens" class="form-control  form-control-sm"  autocomplete="off" placeholder="Qtd Itens" [value]="qtdItensPesquisa">
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
        <div class="row" style="height: 200px; overflow-y: scroll;">
            <div class="col-sm-12 col-xs-12 ">
              <table class="table table-sm table-striped col-sm-12 col-xs-12">
                <thead>
                <tr>
                    <th scope="col" >Produto</th>
                    <th scope="col" >Quant.</th>
                    <th scope="col" >Preço</th>
                    <th scope="col" >Qtd.Pedido</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let itens of itensEstoque">
                    <td>
                      <span class="tooltip-test" [title]="itens.produto">{{itens.produto.substring(0,30)}}</span>
                    </td>
                    <td>
                      {{itens.quantidade}}
                    </td>
                    <td>
                      {{itens.preco | currency : 'R$'}}
                    </td>
                    <td>
                      <a (click)="emitDecreaseQty(itens)" class="btn btn-sm"><i class="fa fa-minus"></i></a>
                          {{itens.qtdPedido}}
                      <a (click)="emitIncreaseQty(itens)" class="btn btn-sm"><i class="fa fa-plus"></i></a>
                    </td>
                </tr>
                </tbody>
              </table>
            </div>
        </div>

      </div>

      <!-- Modal footer itensPedido -->
      <div class="modal-footer">
        <div class="row">
          <div class="col-sm-6 col-xs-6 ">
            <button class="btn btn-primary pull-right btn-block btn-sm" type="button" (click)="SalvarItensEstoque(itensEstoque)" [disabled]="!blnHabilitaInserirItensEstqoue" data-dismiss="modal">
              Inserir
            </button>
          </div>
          <div class="col-sm-6 col-xs-6 ">
            <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Fechar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Modal EDITAR ITEMPEDIDO -->
<div bsModal #childModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">Alteração do Item do Pedido</h4>
        <button type="button" class="close pull-right btn-sm" aria-label="Close" (click)="hideChildModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <!-- Modal body -->
      <div class="modal-body ">
        <div class="row">
          <div class="col-sm-2 col-xs-2 ">
            Produto:
          </div>
          <div class="col-sm-8 col-xs-8 ">
            {{itensPedido == null ? "" : itensPedidoAlteracao.produto }}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
        <div class="row">
          <div class="col-sm-2 col-xs-2 ">
            Quantidade:
          </div>
          <div class="col-sm-3 col-xs-3 ">
            <input name="Quantid" class="form-control  form-control-sm" placeholder="Nº Pedido" [value]="itensPedido == null ? '' : itensPedidoAlteracao.quantid" [attr.disabled]="true">
          </div>
          <div class="col-sm-1 col-xs-1 ">
              Frete:
          </div>
          <div class="col-sm-5 col-xs-5 ">
            <div class="row ">
              <div class="form-check col-sm-4 col-xs-4">
                <input type="radio" class="form-check-input" name="tipoFrete" value="C" [checked]="itensPedido == null ? '' : itensPedidoAlteracao.tipoFrete == 'CLIENTE' ? true : false "  (change)="ClickTipoFrete($event.target.value)"> cliente
              </div>
              <div class="form-check col-sm-4 col-xs-4">
                <input type="radio" class="form-check-input" name="tipoFrete" value="F"  [checked]="itensPedido == null ? '' : itensPedidoAlteracao.tipoFrete == 'FÁBRICA' ? true : false " (change)="ClickTipoFrete($event.target.value)"> fábrica
              </div>
              <!-- <div class="form-check disabled"> -->
              <div class="form-check disabled">
                <input type="radio" class="form-check-input" name="tipoFrete" value="T" [checked]="itensPedido == null ? '' : itensPedidoAlteracao.tipoFrete == 'TERCEIROS' ? true : false " (change)="ClickTipoFrete($event.target.value)"> terceiros
              </div>
              <!-- <div class=" "><input type="radio" [checked]="itensPedido == null ? '' : itensPedidoAlteracao.TipoFrete == 'CLIENTE' ? true : false " > cliente</div>
              <div class="col-sm-4 col-xs-4 "><input type="radio" [checked]="itensPedido == null ? '' : itensPedidoAlteracao.TipoFrete == 'FÁBRICA' ? true : false " > fabrica</div>
              <div class="col-sm-4 col-xs-4 "><input type="radio" [checked]="itensPedido == null ? '' : itensPedidoAlteracao.TipoFrete == '' ? true : false " > terceiros</div> -->
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
        <div class="row">
          <div class="col-sm-2 col-xs-2 ">
            Vl. Tabela:
          </div>
          <div class="col-sm-3 col-xs-3 ">
            <input name="Quantid" class="form-control  form-control-sm" placeholder="Nº Pedido" [value]="itensPedido == null ? '' :itensPedidoAlteracao.valuni | currency : 'R$'" [attr.disabled]="true">
          </div>
          <div class="col-sm-2 col-xs-2 ">
              Desconto(%):
          </div>
          <div class="col-sm-4 col-xs-4 ">
            <input #Desc_itPedido name="Quantid" class="form-control  form-control-sm" placeholder="Desconto(%)" type="text" [allowNegativeNumbers]="false" mask="separator.2" maxlength="2" (keyup)="AtualizaValorItempedido(Desc_itPedido.value,'porc')">
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
        <div class="row">
          <div class="col-sm-2 col-xs-2 ">
            Unitário:
          </div>
          <div class="col-sm-3 col-xs-3 ">
            <input #VlUnitario placeholder="Valor Unit." name="vlUnitario"class="form-control  form-control-sm" type="text"  [value]="itensPedido == null ? '' :itensPedidoAlteracao.valuni | currency : 'R$'" (keyup)="AtualizaValorItempedido(VlUnitario.value,'valor')" (keypress)="IsNumber($event)" (blur)="AtribuiValorFormat()">
          </div>
          <div class="col-sm-2 col-xs-2 ">
              Vl. Total:
          </div>
          <div class="col-sm-4 col-xs-4 ">
            <input #VlTotalItemPed  name="VlTotalItemPed" class="form-control  form-control-sm" placeholder="Valor Total" [value]="itensPedido == null ? '' :itensPedidoAlteracao.valtot | currency : 'R$'" [attr.disabled]="true">
          </div>
        </div>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <div class="row">
          <div class="col-sm-6 col-xs-6 ">
            <button class="btn btn-primary pull-right btn-block btn-sm" type="button" (click)="AlterarItemPedido(itensPedidoAlteracao)" data-dismiss="modal">
              Alterar
            </button>
          </div>
          <div class="col-sm-6 col-xs-6 ">
            <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal" (click)="hideChildModal()">Fechar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Inserir Forma pagamento -->

<div bsModal #AlterarFormaPagtoModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">Plano de Pagamento do Pedido</h4>
        <button type="button" class="close pull-right btn-sm" aria-label="Fechar" (click)="AlterarFormapagamentoFechar()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <!-- Modal body -->
      <div class="modal-body ">
        <div class="row">
          <div class="col-sm-12 col-xs-12 ">
            <p class="bg-info text-white">Plano de pagamento</p>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-3 col-xs-3 ">
            Saldo Devedor:
          </div>
          <div class="col-sm-5 col-xs-5 ">
            <!-- <input class="form-control" currencyMask  class="form-control  form-control-sm"  [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }" autocomplete="off" #val_Fin value="{{formaPagto == null ? '' : formaPagto.val_Fin | currency : 'R$'}}" [attr.disabled]="true" value="{{totalPedido - totalPago | currency : 'R$'}}"> -->
            <input  class="form-control  form-control-sm"  autocomplete="off" [attr.disabled]="true" value="{{(totalPedido - numValorDesconto) - totalPago | currency : 'R$'}}">
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
        <div class="row">
          <div class="col-sm-3 col-xs-3 ">
            Valor à Amortizar:
          </div>
          <div class="col-sm-5 col-xs-5 ">
            <input (keyup)="LimpaCampos('valorAmortizar')" [attr.disabled]="blnAlterarFormaPagto == true ? true : null" class="form-control" prefix="R$ "type="text" [allowNegativeNumbers]="true" mask="separator.2" thousandSeparator="."  #val_Fin2 value ="">
              <!-- <input currencyMask    class="form-control  form-control-sm"  [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }" autocomplete="off" #val_Fin2 value="{{formaPagto == null ? '' : formaPagto.val_Fin | currency : 'R$'}}"> -->
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
        <div class="row">
          <div class="col-sm-3 col-xs-3 ">
            Forma de Pagamento:
          </div>
          <div class="col-sm-5 col-xs-5 ">
            <!-- <select [attr.disabled]="false"> -->
            <select #id_Forma name="id_Forma" class="form-control  form-control-sm" value="{{formaPagto == null ? '' : formaPagto.id_Forma}}" (change)="SetarValidacaoGravacao('formaPagto')" [attr.disabled]="blnFormapagto == true ? true : null || blnAlterarFormaPagto == true ? true : null">
              <option *ngFor=  "let c of (formaPagtoDominio)" [value]="c.id_Forma">{{c.formaPag}}</option>
            </select>
            <!-- <input class="form-control  form-control-sm" autocomplete="off" [attr.disabled]="true" value="{{formaPagto == null ? '' : formaPagto.formaPag}}"> -->
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>

        <div class="row">
          <div class="col-sm-12 col-xs-12 ">
            <p class="bg-info text-white">Outras Formas/Entradas</p>
          </div>
        </div>
        <div class="row" >
          <div class="col-sm-3 col-xs-3 ">
            Nº Parc.:
          </div>
          <div class="col-sm-2 col-xs-2 ">
            <select #NumParcelas class="  form-control-sm" (change)="SetarValorParcela()" [attr.disabled]="blnOutraFormas == true ? true : null">
              <option *ngFor=  "let c of (lstNumeroParcelas)" [value]="c">{{c}}</option>
            </select>
            <!-- <input #NumParcelas type="number" [attr.disabled]="blnOutraFormas == true ? true : null" class="form-control  form-control-sm" autocomplete="off" value="{{formaPagto == null ? '' : formaPagto.tot_Parc}}" (keyup)="SetarValidacaoGravacao()"> -->
          </div>
          <div class="col-sm-1 col-xs-1 ">
            Valor:
          </div>
          <div class="col-sm-2 col-xs-2 ">
            <input class="form-control  form-control-sm" [attr.disabled]="true" autocomplete="off" value="" mask="separator.2" thousandSeparator="." #ValorParcela >
          </div>
          <div class="col-sm-1 col-xs-1 ">
            <input type="checkbox" class="form-control  form-control-sm" [attr.disabled]="blnAlterarFormaPagto == true ? true : null" autocomplete="off" (keyup)="SetarValidacaoGravacao('imbuteFrete')" [attr.disabled]="blnOutraFormas == true ? true : null">
          </div>
          <div class="col-sm-2 col-xs-2 ">
            Imbute frete
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12 col-xs-12 ">
            <p class="bg-info text-white">Cheques</p>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            1º Chq.:
          </div>
          <div class="col-sm-2 col-xs-2 ">
            <input class="form-control  form-control-sm" [attr.disabled]="(blnCheques == true ? true : null) && !(blnAlterarFormaPagto == true ? true : null)" autocomplete="off"  maxlength="6" value="" #cheque (keyup)="SetarValidacaoGravacao('cheque')">
          </div>
          <div class="col-sm-1 col-xs-1 ">
            Banco:
          </div>
          <div class="col-sm-2 col-xs-2 ">
            <input class="form-control  form-control-sm" [attr.disabled]="(blnCheques == true ? true : null) && !(blnAlterarFormaPagto == true ? true : null)" autocomplete="off"  maxlength="3" value="" #banco (keyup)="SetarValidacaoGravacao('cheque')">
          </div>
          <div class="col-sm-1 col-xs-1 ">
            Agência:
          </div>
          <div class="col-sm-2 col-xs-2 ">
            <input class="form-control  form-control-sm" [attr.disabled]="(blnCheques == true ? true : null) && !(blnAlterarFormaPagto == true ? true : null)" autocomplete="off"  maxlength="4" value="" #agencia (keyup)="SetarValidacaoGravacao('cheque')">
          </div>
          <div class="col-sm-1 col-xs-1 ">
            Praça:
          </div>
          <div class="col-sm-2 col-xs-2 ">
            <input class="form-control  form-control-sm" [attr.disabled]="(blnCheques == true ? true : null) && !(blnAlterarFormaPagto == true ? true : null)" autocomplete="off"  maxlength="3" value="" #praca (keyup)="SetarValidacaoGravacao('cheque')">
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12 col-xs-12 ">
            <p class="bg-info text-white">Cartão</p>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-2 col-xs-2 ">
            &nbsp;
          </div>
          <div class="col-sm-2 col-xs-2 ">
            Nº Autorização
          </div>
          <div class="col-sm-5 col-xs-5 ">
            <input #autorizacao class="form-control  form-control-sm"  autocomplete="off" maxlength="6" value="" (keyup)="SetarValidacaoGravacao('autorizacao')" [attr.disabled]="(blnAutorizacao == true ? true : null) && (blnAlterarFormaPagtoNumparc == true ? true : null)">
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
      <!-- Modal footer -->
      <div class="modal-footer">
        <div class="row">
          <div class="col-sm-6 col-xs-6 ">
            <button class="btn btn-primary pull-right btn-block btn-sm" type="button" (click)="SalvarFormaPagamento(formaPagto)" [disabled]="(blnGravaFormaPagto == true ? true : null) && (blnAlterarFormaPagtoNumparc == true ? true : null)" data-dismiss="modal">
              Gravar
            </button>
          </div>
          <div class="col-sm-6 col-xs-6 ">
            <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal" (click)="AlterarFormapagamentoFechar()">Fechar</button>
          </div>
        </div>
      </div>
    </div>
    </div>
  </div>
</div>

<!-- Modal EDITAR ITEMPAGAMENTO -->
<div bsModal #AlterarItemPagamentoModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">Alteração do Item de Pagamento</h4>
        <button type="button" class="close pull-right btn-sm" aria-label="Close" (click)="hideAlterarItemPagamentoModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <!-- Modal body -->
      <div class="modal-body ">
        <div class="row">
          <div class="col-sm-3 col-xs-3 ">
            Forma de Pagamento:
          </div>
          <div class="col-sm-8 col-xs-8 ">
            {{itemPagtoEditavel == null ? "" : itemPagtoEditavel.formaPag }}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            Valor:
          </div>
          <div class="col-sm-3 col-xs-3 ">
            <input name="ValoritemPagto" class="form-control  form-control-sm" placeholder="Valor" [value]="itemPagtoEditavel == null ? '' : itemPagtoEditavel.valor | currency : 'R$' " [attr.disabled]="true">
          </div>
          <div class="col-sm-2 col-xs-2 ">
              Vencimento:
          </div>
          <div class="col-sm-5 col-xs-5 ">
            <div class="row ">
              <input name="Vencimento" class="form-control form-control-sm" placeholder="Vencimento" [value]="itemPagtoEditavel == null ? '' : itemPagtoEditavel.dt_Venc | date: 'dd/MM/yyyy' " [attr.disabled]="true">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            1º Chq.:
          </div>
          <div class="col-sm-2 col-xs-2 ">
            <input class="form-control  form-control-sm" [attr.disabled]="blnGravaitemPagto == true ? true : null" autocomplete="off"  maxlength="6" [value]="itemPagtoEditavel == null ? '' : itemPagtoEditavel.num_Cheq" #chequeItemPagto >
          </div>
          <div class="col-sm-1 col-xs-1 ">
            Banco:
          </div>
          <div class="col-sm-2 col-xs-2 ">
            <input class="form-control  form-control-sm" [attr.disabled]="blnGravaitemPagto == true ? true : null" autocomplete="off"  maxlength="3" [value]="itemPagtoEditavel == null ? '' : itemPagtoEditavel.banco" #bancoItemPagto >
          </div>
          <div class="col-sm-1 col-xs-1 ">
            Agência:
          </div>
          <div class="col-sm-2 col-xs-2 ">
            <input class="form-control  form-control-sm" [attr.disabled]="blnGravaitemPagto == true ? true : null" autocomplete="off"  maxlength="4" [value]="itemPagtoEditavel == null ? '' : itemPagtoEditavel.agencia" #agenciaItemPagto >
          </div>
          <div class="col-sm-1 col-xs-1 ">
            Praça:
          </div>
          <div class="col-sm-2 col-xs-2 ">
            <input class="  form-control-sm" [attr.disabled]="blnGravaitemPagto == true ? true : null" autocomplete="off"  maxlength="3" [value]="itemPagtoEditavel == null ? '' : itemPagtoEditavel.praca" #pracaItemPagto >
          </div>
        </div>
        <div class="row">
          <div class="col-sm-1 col-xs-1 ">
            &nbsp;
          </div>
        </div>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <div class="row">
          <div class="col-sm-6 col-xs-6 ">
            <button class="btn btn-primary pull-right btn-block btn-sm" type="button" (click)="AlterarItemPedido(itensPedidoAlteracao)" data-dismiss="modal" [attr.disabled]="blnGravaitemPagto == true ? true : null">
              Alterar
            </button>
          </div>
          <div class="col-sm-6 col-xs-6 ">
            <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal" (click)="hideAlterarItemPagamentoModal()">Fechar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


